jQuery(document).ready((function(t){var e=-6e4*(new Date).getTimezoneOffset(),n=null,a=null,o=function(e,i=!0){clearTimeout(a),t.ajax({xhr:function(){let e=new window.XMLHttpRequest;return e.upload.addEventListener("loadstart",(function(e){t(".progress").css({opacity:1,width:0})}),!1),e.upload.addEventListener("progress",(function(e){e.lengthComputable&&t(".progress").css({opacity:1,width:e.loaded/e.total*100+"%"})}),!1),e.upload.addEventListener("loadend",(function(e){setTimeout((function(){t(".progress").css({opacity:0,width:0})}),500)}),!1),e},url:window.location.origin+"/wp-admin/admin-ajax.php",type:"post",data:{action:"__ktv",data:e},success:function(r){let c=JSON.parse(r);"redirect"in c?o(c.redirect):c.content!=n&&(n=c.content,history.pushState(c,"",c.url),document.title=c.title+" â€” K3TV",i&&t("html, body").attr("page",c.page).animate({scrollTop:0},10),t("main").html(c.content),s()),parseInt(c.refresh||-1)>1e3&&(a=setTimeout((()=>{o(e,!1)}),c.refresh))}})},i=function(){let n=Date.now()+e;t("clock[time]").each((function(){let e=1e3*parseInt(t(this).attr("time")),a=n-e,o=Math.abs(a)/1e3,i="",s=!0;o<90?(s=!1,i=a<0?"starting soon":"right now"):o<5400?i=Math.round(o/60)+" Minutes":o<172800?i=Math.round(o/3600)+" Hours":o<1209600?i=Math.round(o/86400)+" Days":(s=!1,i="@ "+new Intl.DateTimeFormat("en-US").format((new Date).setTime(e))),t(this).text(s?a<0?"in "+i:i+" ago":i)})),setTimeout(i,999)},s=function(){if(t(".schedule").length){let n=t(".schedule"),a=n.find(".container").innerWidth()/864e5;n.find(".schedule-content").animate({scrollTop:n.find(".day.current").offset().top-n.offset().top-200},10),n.find(".event").each((function(){let n=1e3*parseInt(t(this).closest(".day").attr("date")),o=n+864e5,i=Math.max(n,new Date(t(this).attr("start")).getTime()+e),s=Math.min(o,new Date(t(this).attr("end")).getTime()+e)-i;t(this).css({left:(i-n)*a,width:s*a})}))}};t(document).on("click","a[page]",(function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();let n={};t.each(this.attributes,((t,e)=>{n[e.name]=e.value})),o(n)}));let r=window.location.pathname.split("/");o({page:r[1]||"live",request:r[2]||null}),i()}));