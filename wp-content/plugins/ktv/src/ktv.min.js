jQuery(document).ready((function(t){var e=-6e4*(new Date).getTimezoneOffset(),n=null,a=function(e,i=!0){clearTimeout(n),t.ajax({xhr:function(){let e=new window.XMLHttpRequest;return e.upload.addEventListener("loadstart",(function(e){t(".progress").css({opacity:1,width:0})}),!1),e.upload.addEventListener("progress",(function(e){e.lengthComputable&&t(".progress").css({opacity:1,width:e.loaded/e.total*100+"%"})}),!1),e.upload.addEventListener("loadend",(function(e){setTimeout((function(){t(".progress").css({opacity:0,width:0})}),500)}),!1),e},url:window.location.origin+"/wp-admin/admin-ajax.php",type:"post",data:{action:"__ktv",data:e},success:function(s){let r=JSON.parse(s);"redirect"in r?a(r.redirect):r.content!=t("main").html()&&(history.pushState(r,"",r.url),document.title=r.title+" â€” K3TV",i&&t("html, body").attr("page",r.page).animate({scrollTop:0},10),t("main").html(r.content),o()),parseInt(r.refresh||-1)>1e3&&(n=setTimeout((()=>{a(e,!1)}),r.refresh))}})},i=function(){let n=Date.now()+e;t("clock[time]").each((function(){let e=1e3*parseInt(t(this).attr("time")),a=n-e,i=Math.abs(a)/1e3,o="",s=!0;i<90?(s=!1,o=a<0?"starting soon":"right now"):i<5400?o=Math.round(i/60)+" Minutes":i<172800?o=Math.round(i/3600)+" Hours":i<1209600?o=Math.round(i/86400)+" Days":(s=!1,o="@ "+new Intl.DateTimeFormat("en-US").format((new Date).setTime(e))),t(this).text(s?a<0?"in "+o:o+" ago":o)})),setTimeout(i,999)},o=function(){if(t(".schedule").length){let n=t(".schedule"),a=n.find(".container").innerWidth()/864e5;n.find(".schedule-content").animate({scrollTop:n.find(".day.current").offset().top-n.offset().top-200},10),n.find(".event").each((function(){let n=1e3*parseInt(t(this).closest(".day").attr("date")),i=n+864e5,o=Math.max(n,new Date(t(this).attr("start")).getTime()+e),s=Math.min(i,new Date(t(this).attr("end")).getTime()+e)-o;t(this).css({left:(o-n)*a,width:s*a})}))}};t(document).on("click","a[page]",(function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();let n={};t.each(this.attributes,((t,e)=>{n[e.name]=e.value})),a(n)}));let s=window.location.pathname.split("/");a({page:s[1]||"live",request:s[2]||null}),i()}));